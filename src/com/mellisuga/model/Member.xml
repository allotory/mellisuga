<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mellisuga.dao.MemberDAO">
    <!-- 插入 -->
    <!-- useGeneratedKeys设置为"true"表明要MyBatis获取由数据库自动生成的主键；
    	 keyProperty="id"指定把获取到的主键值注入到Member的id属性--> 
    <insert id="insertMember" parameterType="Member" useGeneratedKeys="true" keyProperty="id">
    	insert into member(
    		fullname, 
    		gender, 
    		avatar_path, 
    		location, 
    		business, 
    		employment, 
    		position, 
    		education, 
    		major, 
    		description,
    		autograph,
    		approve_num,
    		thank_num,
    		question_num,
    		answer_num,
    		collect_num,
    		personality_url,
    		is_emailactive,
    		user_id) 
    	values(
	    	#{fullname}, 
	    	#{gender}, 
	    	#{avatar_path}, 
	    	#{location}, 
	    	#{business}, 
	    	#{employment}, 
	    	#{position}, 
	    	#{education}, 
	    	#{major}, 
	    	#{description},
	    	#{autograph},
	    	#{approve_num},
	    	#{thank_num},
	    	#{question_num},
	    	#{answer_num},
	    	#{collect_num},
	    	#{personality_url},
	    	#{is_emailactive},
	    	#{user_id})
    </insert>
    
    <!-- 查询单一数据 -->
    <select id="queryMemberByUserID" parameterType="int" resultType="Member">
        select * from member where user_id = #{user_id}
    </select>
    
    <!-- 更新 -->
    <update id="updateMember" parameterType="Member">
    	update member set 
	    	fullname=#{fullname}, 
	    	gender=#{gender}, 
	    	avatar_path=#{avatar_path}, 
	    	location=#{location}, 
	    	business=#{business}, 
	    	employment=#{employment}, 
	    	position=#{position}, 
	    	education=#{education}, 
	    	major=#{major}, 
	    	description=#{description},
	    	autograph=#{autograph},
	    	approve_num=#{approve_num},
	    	thank_num=#{thank_num},
	    	question_num=#{question_num},
	    	answer_num=#{answer_num},
	    	collect_num=#{collect_num},
	    	personality_url=#{personality_url},
	    	is_emailactive=#{is_emailactive},
	    	user_id=#{user_id}
	    where id=#{id}
    </update>
    
    <!-- 查询单一数据 -->
    <select id="queryMemberByID" parameterType="int" resultType="Member">
        select * from member where id = #{id}
    </select>
    
</mapper>


